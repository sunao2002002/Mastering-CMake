[TOC]
# 获取和安装CMake
Before using CMake, you will need to install or build the CMake binaries on your system. On many systems, you may find that CMake is already installed or is available for installation with the standard package manager tool for the system. Cygwin, Debian, FreeBSD, OS X MacPorts, Mac OS X Fink, and many others all have CMake distributions.

在使用CMake之前，你可能需要在系统上安装或者构建CMake的二进制文件。在许多系统上，你可能会发现CMake已经安装好了或者可以通过系统的标准包管理器安装。Cygwin，Debian，FreeBSD，OS X， MacPorts, Mac OS X Find， 以及许多其他的系统都有CMake的发布版本。



If your system does not have a CMake package, you can find CMake precompiled for many common architectures on the CMake Download page. Select the desired release and follow the download instructions. CMake may be installed to any directory, so root privileges are not required for installation.

如果你的系统没有CMake的安装包，你可以在CMake的下载页面找到很多常见架构的预编译文件。选择所需的版本，并按照下载说明进行操作。CMake可以安装到任意目录，因此安装时不需要root权限。

If you do not find precompiled binaries for your system, then you can build CMake from source. To build CMake, you will need a modern C++ compiler and the source distribution from the CMake Download page or Kitware’s GitLab instance. To build CMake, follow the instructions in Readme.txt at the top of the source tree.

如果您没有找到您系统的预编译二进制文件，那么您可以从源代码开始构建CMake。为了构建CMake，您需要一个现代C++编译器和从CMake下载页面或者KitWare的Gitlab获得的源码版本。请按照源码目录顶层的ReadMe.txt中的步骤操作。
# 目录结构
There are two main directories CMake uses when building a project: the source directory and the binary directory. The source directory is where the source code for the project is located. This is also where the CMakeLists files will be found. The binary directory is sometimes referred to as the build directory and is where CMake will put the resulting object files, libraries, and executables. CMake will not write any files to the source directory, only to the binary directory.

CMake在构建项目的过程中，主要使用两个目录：源码目录和二进制目录。源码目录是存放项目源码的位置，在这也可以找到CMakeLists文件。二进制目录有时也被称为编译目录，这是CMake用于存放目标文件，库和可执行文件的位置。CMake不会将任何文件写入到源码目录中，只会在二进制目录中。

Out-of-source builds, where the source and binary directories are different, are strongly encouraged. In-source builds where the source and binary directories are the same are supported but should be avoided if possible. Out-of-source builds make it very easy to maintain a clean source tree and allow quick removal of all of the files generated by a build. Having the build tree differ from the source tree also makes it easy to support having multiple builds of a single source tree. This is useful when you want to have multiple builds with different options but just one copy of the source code.

我们强烈推荐这种将源码目录和二进制目录分开这种源码外构建方式。CMake也支持那种二进制和源码混在一起的那种源码内构建方式，但是需要尽可能的去避免。源码外的这种方式非常容易维护一个干净的源码树，允许快速删除构建生成的文件。构建树和源码树不同也允许针对同一份源码生成多个构建。这在您仅有一份源码而希望使用不同构建选项进行多次构建时会很有用。
# 基本CMake用法

CMake takes one or more CMakeLists files as input and produces project files or Makefiles for use with a wide variety of native development tools.

CMake使用一个或多个CmakeList文件作为输入，生成供一系列原生开发工具使用的工程文件或者Makefile。

The typical CMake process is as follows:

1 The project is defined in one or more CMakeLists files

2 CMake configures and generates the project

3 Users build project with their favorite native development tool

Each step of the process is described in detail in the following sections.

CMake的典型流程如下：

1. 工程定义一个或者多个 CMakelists文件。
2. 通过CMake配置和生成工程文件。
3. 用户使用他们喜欢的原生开发工具构建项目。

下面几节中讲详细描述上述过程的每一步。

# CMakeLists 文件
The CMakeLists files (actually CMakeLists.txt but it is common to leave off the extension) are plain text files that contain the project description in CMake’s Language. The cmake-language is expressed as a series of comments, commands and variables. You might wonder why CMake decided to have its own language instead of using an existing one such as Python, Java, or Tcl. The main reason is that CMake developers did not want to make CMake require an additional tool to run. By requiring one of these other languages, all users of CMake would be required to have that language installed, and potentially a specific version of that language. This is on top of the language extensions that would be required to do some of the CMake work, for both performance and capability reasons.

CMakeLists文件（实际上是CMakeLists.txt文件，但我们常常省略后缀）是纯文本文件，包含了使用CMake语言描述的工程信息。CMMake语言由一系列注释、命令和变量构成。您可能会好奇为啥CMake不使用已有的语言例如Python，Java或者Tcl，而是自定义的语言。主要原因在于CMake的开发者不希望CMake依赖其他工具。如果使用其他语言，CMake的使用者需要安装那种语言，潜在的需要那种语言的特殊版本。处于性能和功能方面的原因，需要在语言扩展之上做一些CMake的工作。

# Basic CMake Usage
# CMakeLists Files
## Hello World for CMake
# Configure and Generate
## Running the CMake GUI
## Running the ccmake Curses Interface
## Running CMake from the Command Line
## Specifying the Compiler to CMake
## Build Configurations
# 构建您自己的工程
After you have run CMake, your project will be ready to be built. If your target generator is based on Makefiles then you can build your project by changing the directory to your binary tree and typing make (or gmake or nmake as appropriate). If you generated files for an IDE such as Visual Studio, you can start your IDE, load the project files into it, and build as you normally would.

在运行CMake后，您的工程将可以用于构建了。如果您的目标生成器是基于Makefile的，您可以切换到二进制目录，输入make命令进行编译。如果您为一个IDE如Visual Studio生成项目文件，您可以打开IDE，加载项目文件，像往常一样构建它。

Another option is to use cmake’s --build option from the command line. This option is simply a convenience that allows you to build your project from the command line, even if that requires launching an IDE.
另一个选择是在命令行中使用Cmake的"--build"选项。这带来了一种便利，允许您从命令行构建项目，即使这样需要启动IDE。

That is all there is to installing and running CMake for simple projects. In the following chapters, we will consider CMake in more detail and explain how to use it on more complex software projects.

这就是为一个简单项目安装和运行 CMake 的全部内容。 在接下来的章节中，我们将更详细地讲解CMake 并解释如何在更复杂的软件项目中使用它。
